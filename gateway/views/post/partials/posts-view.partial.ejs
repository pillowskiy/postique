<% const postIds = JSON.stringify({ postIds: posts.map((p) => p.id) }); %>

<ul id="posts-list" class="post-list">
    <template
        hx-post="/r/interactions/stats"
        hx-vals="<%= postIds %>"
        hx-trigger="load"
        hx-target="#posts-list"
        hx-swap="none"
    ></template>

    <% if (user) { %>
    <template
        hx-post="/r/interactions/states"
        hx-vals="<%= postIds %>"
        hx-trigger="load"
        hx-target="#posts-list"
        hx-swap="none"
    ></template>
    <% } %>

    <%- await include(__postListTemplate, { posts }) %>
</ul>
